<tagLib name="cx,html,myhtml" />
<include file="../Public/header" />
<!-- 主体内容  -->
<script LANGUAGE="JavaScript">
function viewfields(id){
 location.href  ="__APP__/sys_fields/index/pid/"+id;
}
</script>
<fieldset >
	<legend>当前项目的数据表: <font class="blue">{$projectname}</font></legend>

<!--  功能操作区域  -->
<table width="100%"   cellpadding=0 cellspacing=0 >
	<tr>
		<td width="60%">
	<input type="button"  onclick="location.href='__URL__/index/pid/{$_GET['pid']}'" class="button1" value="刷新">	
	<input type="button"  onclick="del()" class="button1" value="删除数据">
	<input type="button"  onclick="upbtn()" class="button1" value="更新数据">
	<input type="button"  onclick="location.href='__URL__/sort/pid/{$_GET['pid']}'" class="button1" value="排序">
	<input type="button"  onclick="location.href='__URL__/adv/pid/{$_GET['pid']}'" class="button1" value="+高级视图模式">
		</td>
		<td >
		<DIV  id="myMenuID"></DIV>
      <script language="JavaScript" type="text/javascript">
		var myMenu =
		[
			['▲','高级操作列表',null,null,'本项目高级操作列表',
				['+', 'COPY本项目生成新项目', 'javascript:gourlbyaction("copy,{$_GET['pid']}");', null,'COPY本项目生成新项目'],
				['+', '生成本项目程序文件', 'javascript:gourlbyaction("buidepro,{$_GET['pid']}");', null, '生成本项目程序文件'],
				['+', '查看本项目效果[需先生成]', '__ROOT__/{$projecturl}', 'blank', '查看本项目效果[需先生成]'],
				['+', '生成本项目数据字典', 'javascript:gourlbyaction("buide,{$_GET['pid']}");', null, '生成本项目数据字典'],
			],
		];
		cmDraw ('myMenuID', myMenu, 'hbr', cmThemeOffice, 'ThemeOffice');
		</script> 
		</td>
		
	</tr>
</table>

<!-- 功能操作区域结束 -->
</fieldset>
<fieldset>

<!-- 列表显示区域  -->


<script type="text/javascript">

jQuery(document).ready(function(){
jQuery("#grid_list").jqGrid({
    url:URL+'/json/pid/{$_GET['pid']}/',
    datatype: "json",
    colNames:['ID号','标题', '表名[英名]', '列表','详细','增加','删除','编辑','搜索','搜索形式','活动'],
    colModel:[
        {name:'id',index:'id', width:40,editable:false},
        {name:'caption',index:'caption', width:200,editable:true,editoptions:{size:30}},
        {name:'title',index:'title', width:200,editable:true,editoptions:{size:30}},
        {name:'list',index:'list', width:40,editable:true,edittype:"select",editoptions:{value:"1:是;0:否"}},
    	{name:'view',index:'view', width:40,editable: true,edittype:"select",editoptions:{value:"1:是;0:否"}},
        {name:'add',index:'add', width:40,editable: true,edittype:"select",editoptions:{value:"1:是;0:否"}},
        {name:'del',index:'del',  width:40,editable: true,edittype:"select",editoptions:{value:"1:是;0:否"}},
        {name:'edit',index:'edit', width:40,editable: true,edittype:"select",editoptions:{value:"1:是;0:否"}},
        {name:'search',index:'search', width:40,editable: true,edittype:"select",editoptions:{value:"1:是;0:否"}},
        {name:'searchtype',index:'searchtype', width:80, sortable:false},
        {name:'isaction',index:'isaction',  width:40,editable: true,edittype:"checkbox", editoptions:{value:"1:是;0:否"}}
		],
    pager: jQuery("#grid_pager"),
    rowNum:10,
    rowList:[10,20,30,50],
    imgpath: PUBLIC+'themes/tpmaker/images',
    sortname: "id",
    viewrecords: true,
    sortorder: "asc",
    caption: "当前数据表:{$projectname}",
    cellEdit: true,
    height: '100%',
    cellurl:URL+'/jq_celledit/',
    multiselect: true,
    editurl:URL+'/jq_do/',
	jsonReader: {
		repeatitems : false,
		id:"id"
	},
    afterInsertRow: function(rowid,aData){
    	if(aData.list=='1') {
    		jQuery("#grid_list").setCell(rowid,'list','是',{color:'green'});
    	}else{
    		jQuery("#grid_list").setCell(rowid,'list','否',{color:'red'});
    	}
    	if(aData.view=='1') {
    		jQuery("#grid_list").setCell(rowid,'view','是',{color:'green'});
    	}else{
    		jQuery("#grid_list").setCell(rowid,'view','否',{color:'red'});
    	}
    	if(aData.add=='1') {
    		jQuery("#grid_list").setCell(rowid,'add','是',{color:'green'});
    	}else{
    		jQuery("#grid_list").setCell(rowid,'add','否',{color:'red'});
    	}
    	if(aData.del=='1') {
    		jQuery("#grid_list").setCell(rowid,'del','是',{color:'green'});
    	}else{
    		jQuery("#grid_list").setCell(rowid,'del','否',{color:'red'});
    	}
    	if(aData.edit=='1') {
    		jQuery("#grid_list").setCell(rowid,'edit','是',{color:'green'});
    	}else{
    		jQuery("#grid_list").setCell(rowid,'edit','否',{color:'red'});
    	}
    	if(aData.search=='1') {
    		jQuery("#grid_list").setCell(rowid,'search','是',{color:'green'});
    	}else{
    		jQuery("#grid_list").setCell(rowid,'search','否',{color:'red'});
    	}
    	if(aData.isaction=='1') {
    		jQuery("#grid_list").setCell(rowid,'isaction','是',{color:'green'});
    	}else{
    		jQuery("#grid_list").setCell(rowid,'isaction','否',{color:'red'});
    	}
    	
    	
    	
    }
	
	
})
.navGrid('#grid_pager',
{edit:true,add:true,del:true,search:true,refresh:true}
);
});
</script>

<table id="grid_list" class="scroll" cellpadding="0" cellspacing="0" ></table>
<div id="grid_pager" class="scroll" style="text-align:right;"></div>
<!--  分页显示区域 -->
</fieldset>
<include file="../Public/footer" />
